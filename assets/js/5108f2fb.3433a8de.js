"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[457],{6070:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"module1/ros2_packages","title":"ROS 2 Package Structure","description":"Introduction","source":"@site/docs/module1/ros2_packages.md","sourceDirName":"module1","slug":"/module1/ros2_packages","permalink":"/humanoid-robotics-book/docs/module1/ros2_packages","draft":false,"unlisted":false,"editUrl":"https://github.com/Amnaahmed798/humanoid-robotics-book/edit/main/docs/module1/ros2_packages.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Architecture","permalink":"/humanoid-robotics-book/docs/module1/ros2_architecture"},"next":{"title":"Interfacing Sensors and Actuators","permalink":"/humanoid-robotics-book/docs/module1/sensor_actuator_interface"}}');var t=a(4848),o=a(8453);const s={},i="ROS 2 Package Structure",c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"package.xml",id:"packagexml",level:2},{value:"setup.py",id:"setuppy",level:2},{value:"Python Node Structure",id:"python-node-structure",level:2},{value:"Creating a New Package",id:"creating-a-new-package",level:2},{value:"Using colcon",id:"using-colcon",level:3},{value:"Manual Creation",id:"manual-creation",level:3},{value:"Launch Files in Packages",id:"launch-files-in-packages",level:2},{value:"Configuration Files",id:"configuration-files",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ros-2-package-structure",children:"ROS 2 Package Structure"})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 packages are the fundamental building blocks of ROS 2 software. A package contains libraries, executables, configuration files, and other resources needed for a specific task. Understanding the structure of ROS 2 packages is crucial for organizing your robot software effectively."}),"\n",(0,t.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,t.jsx)(n.p,{children:"A typical ROS 2 package has the following structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration for C++\n\u251c\u2500\u2500 package.xml             # Package metadata\n\u251c\u2500\u2500 setup.py                # Build configuration for Python\n\u251c\u2500\u2500 setup.cfg               # Installation configuration\n\u251c\u2500\u2500 src/                    # Source code (C++)\n\u2502   \u2514\u2500\u2500 my_node.cpp\n\u251c\u2500\u2500 my_robot_package/       # Python modules\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 my_module.py\n\u251c\u2500\u2500 launch/                 # Launch files\n\u2502   \u2514\u2500\u2500 my_launch_file.py\n\u251c\u2500\u2500 config/                 # Configuration files\n\u2502   \u2514\u2500\u2500 params.yaml\n\u251c\u2500\u2500 urdf/                   # Robot description files\n\u2502   \u2514\u2500\u2500 robot.urdf\n\u251c\u2500\u2500 meshes/                 # 3D mesh files\n\u2502   \u2514\u2500\u2500 part.stl\n\u251c\u2500\u2500 include/                # Header files (C++)\n\u2502   \u2514\u2500\u2500 my_robot_package/\n\u2502       \u2514\u2500\u2500 my_header.h\n\u2514\u2500\u2500 test/                   # Test files\n    \u2514\u2500\u2500 test_my_module.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"packagexml",children:"package.xml"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"package.xml"})," file contains metadata about the package:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Package for my robot functionality</description>\n  <maintainer email="user@example.com">Your Name</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n  <depend>geometry_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"setuppy",children:"setup.py"}),"\n",(0,t.jsxs)(n.p,{children:["For Python packages, ",(0,t.jsx)(n.code,{children:"setup.py"})," defines the build configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n        # Include config files\n        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),\n        # Include URDF files\n        (os.path.join('share', package_name, 'urdf'), glob('urdf/*.urdf')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='user@example.com',\n    description='Package for my robot functionality',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_robot_package.my_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"python-node-structure",children:"Python Node Structure"}),"\n",(0,t.jsx)(n.p,{children:"A typical Python node in a ROS 2 package follows this structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom sensor_msgs.msg import JointState\nfrom my_robot_package.my_library import MyHelperClass\n\nclass MyRobotNode(Node):\n    def __init__(self):\n        super().__init__('my_robot_node')\n\n        # Create subscribers\n        self.subscription = self.create_subscription(\n            String,\n            'topic_name',\n            self.listener_callback,\n            10\n        )\n\n        # Create publishers\n        self.publisher = self.create_publisher(\n            JointState,\n            'joint_states',\n            10\n        )\n\n        # Create timers\n        self.timer = self.create_timer(0.1, self.timer_callback)\n\n        # Declare parameters\n        self.declare_parameter('param_name', 'default_value')\n\n        self.get_logger().info('MyRobotNode has been started')\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'Received: {msg.data}')\n\n    def timer_callback(self):\n        msg = JointState()\n        # Populate message\n        self.publisher.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyRobotNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-new-package",children:"Creating a New Package"}),"\n",(0,t.jsx)(n.h3,{id:"using-colcon",children:"Using colcon"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a new workspace\nmkdir -p ~/ros2_workspace/src\ncd ~/ros2_workspace/src\n\n# Create a new package (Python)\nros2 pkg create --build-type ament_python my_robot_package\n\n# Create a new package (C++)\nros2 pkg create --build-type ament_cmake my_robot_package\n"})}),"\n",(0,t.jsx)(n.h3,{id:"manual-creation",children:"Manual Creation"}),"\n",(0,t.jsx)(n.p,{children:"For Python packages, create the structure manually:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p my_robot_package/my_robot_package\ntouch my_robot_package/my_robot_package/__init__.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"launch-files-in-packages",children:"Launch Files in Packages"}),"\n",(0,t.jsxs)(n.p,{children:["Launch files should be placed in the ",(0,t.jsx)(n.code,{children:"launch/"})," directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    # Get package share directory\n    pkg_share = get_package_share_directory('my_robot_package')\n\n    # Include URDF file\n    urdf_file = os.path.join(pkg_share, 'urdf', 'robot.urdf')\n\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='my_node',\n            name='my_robot_node',\n            parameters=[\n                {'param_name': 'param_value'},\n                os.path.join(pkg_share, 'config', 'params.yaml')\n            ]\n        )\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,t.jsxs)(n.p,{children:["Configuration files should be placed in the ",(0,t.jsx)(n.code,{children:"config/"})," directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# params.yaml\nmy_robot_node:\n  ros__parameters:\n    rate: 10\n    enable_feature: true\n    threshold: 0.5\n    topic_name: "/my_topic"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Use descriptive and consistent naming conventions"}),"\n",(0,t.jsx)(n.li,{children:"Group related functionality in the same package"}),"\n",(0,t.jsx)(n.li,{children:"Keep packages focused on a single responsibility"}),"\n",(0,t.jsx)(n.li,{children:"Use appropriate build types (ament_python for Python, ament_cmake for C++)"}),"\n",(0,t.jsx)(n.li,{children:"Include proper documentation in package.xml"}),"\n",(0,t.jsx)(n.li,{children:"Add dependencies explicitly in package.xml"}),"\n",(0,t.jsx)(n.li,{children:"Organize files in appropriate subdirectories"}),"\n",(0,t.jsx)(n.li,{children:"Use the same name for the package and main Python module"}),"\n",(0,t.jsx)(n.li,{children:"Include proper licensing information"}),"\n",(0,t.jsxs)(n.li,{children:["Test your package with ",(0,t.jsx)(n.code,{children:"colcon build"})," and ",(0,t.jsx)(n.code,{children:"ros2 run"})]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>i});var r=a(6540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);